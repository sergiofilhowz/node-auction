angular.module("auction.tpls", []).run(["$templateCache", function($templateCache) {$templateCache.put("auction/service/auction.form.html","<md-dialog class=\"auction-creation-form\"  layout-padding\n           aria-label=\"\">\n    <md-dialog-title>\n        <h2 class=\"md-headline\" translate=\"AUCTION_CREATION\"></h2>\n    </md-dialog-title>\n    <md-divider></md-divider>\n\n    <md-dialog-content>\n        <div class=\"auction-item\" flex layout=\"column\" layout-align=\"center center\">\n            <img class=\"md-avatar\" ng-src=\"icons/{{ item.icon }}.svg\" />\n            <span class=\"auction-item-name\">\n                {{ item.name }} <i>({{ item.quantity }})</i>\n            </span>\n        </div>\n        <form name=\"auctionForm\" flex>\n            <md-input-container flex>\n                <label translate=\"AUCTION_CREATION_QUANTITY\"></label>\n                <input name=\"quantity\" type=\"number\"\n                       ng-model=\"quantity\"\n                       required min=\"1\" max=\"{{ item.quantity }}\" />\n                <div ng-messages=\"auctionForm.quantity.$error\" multiple md-auto-hide=\"false\">\n                    <div ng-message=\"min\" translate=\"AUCTION_CREATION_QUANTITY_REQUIRED\"></div>\n                    <div ng-message=\"max\" translate=\"AUCTION_CREATION_QUANTITY_OVER_MAXIMUM\"></div>\n                    <div ng-message=\"required\" translate=\"AUCTION_CREATION_QUANTITY_REQUIRED\"></div>\n                </div>\n            </md-input-container>\n            <md-input-container flex>\n                <label translate=\"AUCTION_CREATION_INITIAL_BID\"></label>\n                <input name=\"initialBid\" type=\"number\"\n                       ng-model=\"initialBid\"\n                       required min=\"1\" />\n                <div ng-messages=\"auctionForm.initialBid.$error\" multiple md-auto-hide=\"false\">\n                    <div ng-message=\"min\" translate=\"AUCTION_CREATION_INITIAL_BID_REQUIRED\"></div>\n                    <div ng-message=\"required\" translate=\"AUCTION_CREATION_INITIAL_BID_REQUIRED\"></div>\n                </div>\n            </md-input-container>\n        </form>\n    </md-dialog-content>\n\n    <md-dialog-actions ng-if=\"!promise\">\n        <md-button ng-click=\"confirm()\"\n                   ng-disabled=\"auctionForm.$invalid\"\n                   class=\"md-primary\"\n                   translate=\"AUCTION_CREATION_CONFIRM\"></md-button>\n        <md-button ng-click=\"closeDialog()\" class=\"md-warn\" translate=\"AUCTION_CREATION_CANCEL\"></md-button>\n    </md-dialog-actions>\n\n    <md-dialog-actions ng-if=\"promise\">\n        <coa-progress promise=\"promise\" retry=\"confirm()\"></coa-progress>\n    </md-dialog-actions>\n\n</md-dialog>");
$templateCache.put("auction/widget/auction.widget.html","<md-card class=\"auction-widget\">\n    <md-card-title layout=\"row\" layout-align=\"center center\">\n        <md-card-title-text>\n            <span class=\"md-headline\"\n                  translate=\"AUCTION_WIDGET_AUCTION\"></span>\n        </md-card-title-text>\n    </md-card-title>\n    <md-divider></md-divider>\n\n    <md-card-content layout-padding layout=\"column\" ng-if=\"!$ctrl.auction\" layout-align=\"center center\">\n        <span ng-if=\"$ctrl.promise.$$state != 0\"\n              class=\"md-subheader\" translate=\"AUCTION_WIDGET_AUCTION_NONE\"></span>\n        <coa-progress promise=\"$ctrl.promise\" retry=\"$ctrl.retry()\"></coa-progress>\n    </md-card-content>\n\n    <md-progress-linear md-mode=\"determinate\" ng-if=\"$ctrl.auction\"\n                        value=\"{{ $ctrl.auction.timeLeft / $ctrl.auction.originalTimeLeft * 100 }}\"></md-progress-linear>\n    <md-card-content layout-padding layout=\"column\" ng-if=\"$ctrl.auction\">\n        <div class=\"labeled seller-name\" layout=\"row\">\n            <label translate=\"AUCTION_WIDGET_AUCTION_SELLER\"></label>\n            <span ng-bind=\"$ctrl.auction.seller.name\"></span>\n        </div>\n        <div class=\"auction-item\" layout=\"row\">\n            <div layout=\"column\" flex>\n                <img class=\"md-avatar\" ng-src=\"icons/{{ $ctrl.auction.item.icon }}.svg\" />\n                <span class=\"auction-item-name\" ng-bind=\"$ctrl.auction.item.name\"></span>\n            </div>\n            <div class=\"vertical-labeled\" layout=\"column\" flex>\n                <label translate=\"AUCTION_WIDGET_AUCTION_QUANTITY\"></label>\n                <span class=\"auction-item-quantity\" ng-bind=\"$ctrl.auction.item.quantity\"></span>\n            </div>\n        </div>\n        <div class=\"labeled\" layout=\"row\" flex>\n            <label translate=\"AUCTION_WIDGET_AUCTION_TIME_LEFT\"></label>\n            <span class=\"auction-time-left\" ng-bind=\"$ctrl.auction.timeLeft\"></span>\n            &nbsp;\n            <span class=\"auction-time-left-seconds\" translate=\"AUCTION_WIDGET_AUCTION_TIME_LEFT_SECONDS\"></span>\n        </div>\n        <div class=\"labeled\" layout=\"row\" flex ng-if=\"$ctrl.auction.winningBid\">\n            <label translate=\"AUCTION_WIDGET_AUCTION_WINNING_BID\"></label>\n            <span class=\"inventory-item-quantity\" ng-bind=\"$ctrl.auction.winningBid\"></span>\n        </div>\n        <div class=\"labeled\" layout=\"row\" flex ng-if=\"!$ctrl.auction.winningBid\">\n            <label translate=\"AUCTION_WIDGET_AUCTION_INITIAL_BID\"></label>\n            <span class=\"inventory-item-quantity\" ng-bind=\"$ctrl.auction.initialBid\"></span>\n        </div>\n        <div class=\"bid-form\" flex>\n            <h2 ng-if=\"$ctrl.playerId == $ctrl.auction.seller.id\"\n                translate=\"AUCTION_WIDGET_AUCTION_SELF\"></h2>\n            <coa-progress promise=\"$ctrl.bidPromise\" retry=\"$ctrl.confirm($ctrl.bidValue)\"></coa-progress>\n            <form name=\"bidForm\" layout=\"row\"\n                  layout-align=\"center center\"\n                  ng-if=\"$ctrl.playerId != $ctrl.auction.seller.id && (!$ctrl.bidPromise || $ctrl.bidPromise.$$state.status == 1)\">\n                <md-input-container>\n                    <label translate=\"AUCTION_WIDGET_AUCTION_BID_VALUE\"></label>\n                    <input name=\"bidValue\" type=\"number\"\n                           ng-model=\"$ctrl.bidValue\"\n                           min=\"{{ $ctrl.auction.winningBid ? $ctrl.auction.winningBid + 1 : $ctrl.auction.initialBid }}\" />\n                    <div ng-messages=\"bidForm.bidValue.$error\" multiple md-auto-hide=\"false\">\n                        <div ng-message=\"min\"\n                             translate=\"AUCTION_WIDGET_AUCTION_BID_ERROR_MIN\"\n                             translate-values=\"{ min : $ctrl.auction.initialBid }\"></div>\n                    </div>\n                </md-input-container>\n                <md-button class=\"md-raised md-primary\"\n                           ng-click=\"$ctrl.confirm($ctrl.bidValue)\"\n                           ng-disabled=\"!$ctrl.bidValue || bidForm.bidValue.$error.min\">\n                    <ng-md-icon icon=\"attach_money\"></ng-md-icon>\n                    <span translate=\"AUCTION_WIDGET_AUCTION_PLACE_BID\"></span>\n                </md-button>\n            </form>\n        </div>\n    </md-card-content>\n</md-card>");
$templateCache.put("core/progress/progress.html","<div layout=\"row\" layout-sm=\"column\" layout-align=\"space-around\" ng-if=\"$ctrl.promise.$$state.status == 0\">\n    <md-progress-circular md-mode=\"indeterminate\"></md-progress-circular>\n</div>\n<div layout=\"row\" layout-sm=\"column\" layout-align=\"space-around\" ng-if=\"$ctrl.promise.$$state.status == 2\">\n    <md-button aria-label=\"replay\" class=\"md-icon-button\" ng-click=\"$ctrl.retry()\">\n        <ng-md-icon icon=\"replay\"></ng-md-icon>\n    </md-button>\n</div>");
$templateCache.put("inventory/widget/inventory.widget.html","<md-card class=\"inventory-widget\">\n    <md-card-title>\n        <md-card-title-text>\n            <span class=\"md-headline\" translate=\"AUCTION_INVENTORY\"></span>\n        </md-card-title-text>\n    </md-card-title>\n    <md-divider></md-divider>\n    <md-card-content flex>\n        <coa-progress promise=\"$ctrl.promise\" retry=\"$ctrl.retry()\"></coa-progress>\n        <md-list flex ng-transclude></md-list>\n    </md-card-content>\n</md-card>");
$templateCache.put("player/widget/player.widget.html","<md-card class=\"player-widget\">\n    <md-card-title layout=\"row\" layout-align=\"center center\">\n        <md-card-title-text>\n            <span class=\"md-headline\" translate=\"AUCTION_PLAYER_STATS\"></span>\n        </md-card-title-text>\n        <md-button ng-click=\"$ctrl.logout()\" aria-label=\"{{ \'AUCTION_PLAYER_LOGOUT\' | translate }}\">\n            <md-tooltip>{{ \'AUCTION_PLAYER_LOGOUT\' | translate }}</md-tooltip>\n            <ng-md-icon icon=\"logout\"></ng-md-icon>\n        </md-button>\n    </md-card-title>\n    <md-divider></md-divider>\n    <md-card-content layout-padding layout=\"column\">\n        <coa-progress promise=\"$ctrl.promise\" retry=\"$ctrl.retry()\"></coa-progress>\n        <div class=\"player-name\" ng-if=\"$ctrl.playerName\">\n            <label translate=\"AUCTION_PLAYER_STATS_NAME\"></label>:\n            <span ng-bind=\"$ctrl.playerName\"></span>\n        </div>\n        <div class=\"player-coins\" ng-if=\"$ctrl.playerCoins !== undefined\">\n            <label translate=\"AUCTION_PLAYER_STATS_COINS\"></label>:\n            <span ng-bind=\"$ctrl.playerCoins\"></span>\n        </div>\n    </md-card-content>\n</md-card>");
$templateCache.put("view/application/application.html","<md-content layout-fill ng-controller=\"ApplicationController as vm\">\n    <div ng-if=\"vm.hasSession()\" layout-fill layout-padding layout=\"column\" layout-gt-sm=\"row\" ng-init=\"vm.init()\">\n        <coa-player-widget ng-init=\"vm.getPlayerStats()\"\n                           promise=\"vm.playerStatsPromise\"\n                           retry=\"vm.getPlayerStats()\"\n                           flex-xs=\"100\" flex-gt-sm=\"33\"\n                           player-name=\"vm.player.name\"\n                           player-coins=\"vm.player.coins\"\n                           logout=\"vm.logout()\"></coa-player-widget>\n        <coa-inventory-widget ng-init=\"vm.getPlayerInventory()\"\n                              promise=\"vm.inventoryPromise\"\n                              retry=\"vm.getPlayerInventory()\"\n                              flex-xs=\"100\" flex-gt-sm=\"33\">\n            <coa-inventory-item ng-repeat=\"item in vm.inventory\"\n                                item-name=\"item.name\"\n                                item-quantity=\"item.quantity\"\n                                item-icon=\"item.icon\"\n                                item-click=\"vm.createAuction(item)\"></coa-inventory-item>\n        </coa-inventory-widget>\n        <coa-auction-widget ng-init=\"vm.getActiveAuction()\"\n                            promise=\"vm.auctionPromise\"\n                            retry=\"vm.getActiveAuction()\"\n                            place-bid=\"vm.placeBid(bidValue, auction)\"\n                            flex-xs=\"100\" flex-gt-sm=\"33\"\n                            auction=\"vm.auction\"\n                            player-id=\"vm.player.id\"></coa-auction-widget>\n    </div>\n    <div ng-if=\"!vm.hasSession()\" layout-align=\"center center\" layout=\"row\">\n        <md-card flex-gt-sm=\"30\" flex-sm=\"100\" flex-xs=\"100\">\n            <md-card-title>\n                <span translate=\"AUCTION_LOGIN\"></span>\n            </md-card-title>\n            <md-divider></md-divider>\n            <md-card-content>\n                <form name=\"loginForm\" layout=\"column\"\n                      layout-align=\"center center\">\n                    <md-input-container>\n                        <label translate=\"AUCTION_LOGIN_USERNAME\"></label>\n                        <input name=\"name\" type=\"text\"\n                               ng-model=\"name\"\n                               ng-disabled=\"vm.loginPromise\"\n                               required />\n                        <div ng-messages=\"loginForm.name.$error\" multiple md-auto-hide=\"false\">\n                            <div ng-message=\"required\" translate=\"AUCTION_LOGIN_USERNAME_REQUIRED\"></div>\n                        </div>\n                    </md-input-container>\n                    <coa-progress promise=\"vm.loginPromise\" retry=\"vm.login(name)\"></coa-progress>\n                    <md-button ng-if=\"!vm.loginPromise\"\n                               ng-click=\"vm.login(name)\"\n                               class=\"md-raised md-primary\"\n                               ng-disabled=\"loginForm.$invalid\">\n                        <span translate=\"AUCTION_LOGIN_CONFIRM\"></span>\n                    </md-button>\n                </form>\n            </md-card-content>\n        </md-card>\n    </div>\n</md-content>");
$templateCache.put("inventory/widget/item/inventory.item.html","<md-list-item layout=\"row\" class=\"inventory-item\">\n    <div layout=\"column\" flex=\"33\">\n        <img class=\"md-avatar\" ng-src=\"icons/{{ $ctrl.itemIcon }}.svg\" />\n        <span class=\"inventory-item-name\" ng-bind=\"$ctrl.itemName\"></span>\n    </div>\n    <div layout=\"column\" flex=\"33\" layout-fill>\n        <label translate=\"AUCTION_INVENTORY_QUANTITY\"></label>\n        <span class=\"inventory-item-quantity\" ng-bind=\"$ctrl.itemQuantity\"></span>\n    </div>\n    <div layout=\"column\" flex=\"33\">\n        <img class=\"megaphone\" src=\"icons/megaphone.png\" />\n        <md-button class=\"md-raised md-primary\"\n                   ng-click=\"$ctrl.itemClick()\"\n                   aria-label=\"{{ \'AUCTION_INVENTORY_AUCTION\' | translate }}\"\n                   translate=\"AUCTION_INVENTORY_AUCTION\"></md-button>\n    </div>\n</md-list-item>");}]);
!function(n){"use strict";n.module("auction.auction",["pascalprecht.translate","ngMaterial","ngMdIcons","ngMessages","auction.core"])}(angular),function(n){"use strict";n.module("auction.core",["auction.tpls"])}(angular),function(n){"use strict";n.module("auction.inventory",["pascalprecht.translate","ngMaterial","ngMdIcons","auction.core"])}(angular),function(n){"use strict";n.module("auction.player",["pascalprecht.translate","ngMaterial","ngMdIcons","auction.core"])}(angular),function(n){"use strict";n.module("auction",["pascalprecht.translate","ngMaterial","ngMdIcons","auction.core","auction.tpls","auction.player","auction.inventory","auction.auction"])}(angular),function(n){"use strict";function t(n){n.useStaticFilesLoader({prefix:"languages/",suffix:".json"}),n.preferredLanguage("en_US"),n.useSanitizeValueStrategy("escaped")}n.module("auction").config(t),t.$inject=["$translateProvider"]}(angular),function(n){"use strict";function t(t,o){function i(){return t.get("/auction").then(function(n){return"null"==n.data?null:n.data})}function r(n,e,o){return t.post("/auction",{itemId:n,quantity:e,initialBid:o}).then(function(n){return n.data})}function c(n,e){return t.post("/auction/bid",{auctionId:n,value:e}).then(function(n){return n.data})}function a(t,i){o.show({parent:n.element(document.querySelector("body")),templateUrl:"auction/service/auction.form.html",locals:{item:t,confirmFn:i},controller:e})}var u=this;return u.getActiveAuction=i,u.createAuction=r,u.placeBid=c,u.openDialogCreation=a,u}function e(n,t,e,o){function i(){t.hide()}function r(){n.promise=o(e,n.quantity,n.initialBid).then(function(n){return i(),n})["catch"](function(){i()})}n.item=e,n.closeDialog=i,n.confirm=r}n.module("auction.auction").service("auctionService",t),t.$inject=["$http","$mdDialog"],e.$inject=["$scope","$mdDialog","item","confirmFn"]}(angular),function(n){"use strict";function t(t){function e(n){o.bidPromise=o.placeBid({bidValue:n,auction:o.auction}).then(function(){o.bidValue=void 0})}var o=this;t.$watchGroup(["$ctrl.auction.initialBid","$ctrl.auction.winningBid"],function(){n.isDefined(o.auction)&&(n.isDefined(o.auction.winningBid)?o.auction.minimumBid=o.auction.winningBid+1:o.auction.winningBid=o.auction.initialBid)}),o.confirm=e}n.module("auction.auction").component("coaAuctionWidget",{templateUrl:"auction/widget/auction.widget.html",bindings:{auction:"=",playerId:"=",placeBid:"&",promise:"=",retry:"&"},controller:t}),t.$inject=["$scope"]}(angular),function(n){"use strict";n.module("auction.core").component("coaProgress",{templateUrl:"core/progress/progress.html",bindings:{promise:"=",retry:"&"}})}(angular),function(n){"use strict";n.module("auction.inventory").component("coaInventoryWidget",{transclude:!0,templateUrl:"inventory/widget/inventory.widget.html",bindings:{promise:"=",retry:"&"}})}(angular),function(n){"use strict";function t(n,t,e,o){return{request:function(n){return n.headers.Token=o.token,n},responseError:function(o){return 500===o.status&&t(o.data.message).then(function(n){var t=e.get("$mdToast");t.show(t.simple().textContent(n))}),401===o.status&&(location.href=""),n.reject(o)}}}function e(n){n.interceptors.push("HttpInterceptor")}n.module("auction.player").factory("HttpInterceptor",t).config(e),t.$inject=["$q","$translate","$injector","playerSessionService"],e.$inject=["$httpProvider"]}(angular),function(n){"use strict";function t(n,t){function e(e){return t.post("/player/login",{name:e}).then(function(t){n.token=t.data.token})}function o(){return t.get("/player/stats").then(function(n){return n.data})}function i(){return t.get("/player/inventory").then(function(n){return n.data})}var r=this;return r.login=e,r.getPlayerStats=o,r.getPlayerInventory=i,r}n.module("auction.player").service("playerService",t),t.$inject=["playerSessionService","$http"]}(angular),function(n){"use strict";function t(){return this.token=null,this}n.module("auction.player").service("playerSessionService",t),t.$inject=[]}(angular),function(n){"use strict";n.module("auction.player").component("coaPlayerWidget",{templateUrl:"player/widget/player.widget.html",bindings:{playerName:"=",playerCoins:"=",logout:"&",promise:"=",retry:"&"}})}(angular),function(n){"use strict";function t(n,t,e,o,i,r){function c(n){$.loginPromise=t.login(n)}function a(){return null!=o.token}function u(){$.auction&&$.auction.timeLeft>0&&$.auction.timeLeft--}function s(){$.inventoryPromise=t.getPlayerInventory().then(S($,"inventory"))}function l(){$.playerStatsPromise=t.getPlayerStats().then(S($,"player"))}function d(n){e.openDialogCreation(n,f)}function f(n,t,o){return e.createAuction(n.id,t,o)}function p(){$.auctionPromise=e.getActiveAuction().then(S($,"auction"))}function g(){location.href=""}function m(){var n=io.connect("/",{});n.on("disconnect",g),n.on("connect",function(){n.emit("authenticate",o.token),n.on(A.AUCTION_START,S($,"auction")),n.on(A.AUCTION_FINISH,h),n.on(A.BID_PLACED,S($,"auction")),n.on(A.AUCTION_WIN,v),n.on(A.INVENTORY_UPDATE,S($,"inventory")),n.on(A.COIN_UPDATE,I)})}function v(){i("AUCTION_WON").then(function(n){r.show(r.simple().textContent(n))})}function y(n,t){return e.placeBid(t.id,n)}function h(){$.auction=null}function I(n){$.player.coins=n}function S(n,t){return function(e){n[t]=e}}var $=this;$.interval=n(u,1e3),$.hasSession=a,$.login=c,$.logout=g,$.createAuction=d,$.getPlayerInventory=s,$.getPlayerStats=l,$.getActiveAuction=p,$.placeBid=y,$.init=m;const A={AUCTION_START:"auction_start",AUCTION_FINISH:"auction_finish",BID_PLACED:"bid_placed",AUCTION_WIN:"auction_win",INVENTORY_UPDATE:"inventory_update",COIN_UPDATE:"coin_update"}}n.module("auction").controller("ApplicationController",t),t.$inject=["$interval","playerService","auctionService","playerSessionService","$translate","$mdToast"]}(angular),function(n){"use strict";n.module("auction.inventory").component("coaInventoryItem",{templateUrl:"inventory/widget/item/inventory.item.html",bindings:{itemName:"=",itemQuantity:"=",itemIcon:"=",itemClick:"&"}})}(angular);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlbXBsYXRlcy5qcyIsImF1Y3Rpb24vYXVjdGlvbi5tb2R1bGUuanMiLCJjb3JlL2NvcmUubW9kdWxlLmpzIiwiaW52ZW50b3J5L2ludmVudG9yeS5tb2R1bGUuanMiLCJwbGF5ZXIvcGxheWVyLm1vZHVsZS5qcyIsIm1vZHVsZS5qcyIsImkxOG4vaTE4bi5qcyIsImF1Y3Rpb24vc2VydmljZS9hdWN0aW9uLnNlcnZpY2UuanMiLCJhdWN0aW9uL3dpZGdldC9hdWN0aW9uLndpZGdldC5qcyIsImNvcmUvcHJvZ3Jlc3MvcHJvZ3Jlc3MuanMiLCJpbnZlbnRvcnkvd2lkZ2V0L2ludmVudG9yeS53aWRnZXQuanMiLCJwbGF5ZXIvc2VydmljZS9odHRwLmludGVyY2VwdG9yLmpzIiwicGxheWVyL3NlcnZpY2UvcGxheWVyLnNlcnZpY2UuanMiLCJwbGF5ZXIvc2VydmljZS9wbGF5ZXIuc2Vzc2lvbi5zZXJ2aWNlLmpzIiwicGxheWVyL3dpZGdldC9wbGF5ZXIud2lkZ2V0LmpzIiwidmlldy9hcHBsaWNhdGlvbi9hcHBsaWNhdGlvbi5jb250cm9sbGVyLmpzIiwiaW52ZW50b3J5L3dpZGdldC9pdGVtL2ludmVudG9yeS5pdGVtLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJpMThuQ29uZmlnIiwiJHRyYW5zbGF0ZVByb3ZpZGVyIiwidXNlU3RhdGljRmlsZXNMb2FkZXIiLCJwcmVmaXgiLCJzdWZmaXgiLCJwcmVmZXJyZWRMYW5ndWFnZSIsInVzZVNhbml0aXplVmFsdWVTdHJhdGVneSIsImNvbmZpZyIsIiRpbmplY3QiLCJhdWN0aW9uU2VydmljZSIsIiRodHRwIiwiJG1kRGlhbG9nIiwiZ2V0QWN0aXZlQXVjdGlvbiIsImdldCIsInRoZW4iLCJyZXN1bHQiLCJkYXRhIiwiY3JlYXRlQXVjdGlvbiIsIml0ZW1JZCIsInF1YW50aXR5IiwiaW5pdGlhbEJpZCIsInBvc3QiLCJwbGFjZUJpZCIsImF1Y3Rpb25JZCIsInZhbHVlIiwib3BlbkRpYWxvZ0NyZWF0aW9uIiwiaXRlbSIsImNvbmZpcm1GbiIsInNob3ciLCJwYXJlbnQiLCJlbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidGVtcGxhdGVVcmwiLCJsb2NhbHMiLCJjb250cm9sbGVyIiwiYXVjdGlvbkZvcm1Db250cm9sbGVyIiwic2VsZiIsInRoaXMiLCIkc2NvcGUiLCJjbG9zZURpYWxvZyIsImhpZGUiLCJjb25maXJtIiwicHJvbWlzZSIsInNlcnZpY2UiLCJhdWN0aW9uV2lkZ2V0Q29udHJvbGxlciIsImJpZFZhbHVlIiwiJGN0cmwiLCJiaWRQcm9taXNlIiwiYXVjdGlvbiIsInVuZGVmaW5lZCIsIiR3YXRjaEdyb3VwIiwiaXNEZWZpbmVkIiwid2lubmluZ0JpZCIsIm1pbmltdW1CaWQiLCJjb21wb25lbnQiLCJiaW5kaW5ncyIsInBsYXllcklkIiwicmV0cnkiLCJ0cmFuc2NsdWRlIiwiSHR0cEludGVyY2VwdG9yIiwiJHEiLCIkdHJhbnNsYXRlIiwiJGluamVjdG9yIiwicGxheWVyU2Vzc2lvblNlcnZpY2UiLCJyZXF1ZXN0IiwiaGVhZGVycyIsInRva2VuIiwicmVzcG9uc2VFcnJvciIsInJlc3BvbnNlIiwic3RhdHVzIiwibWVzc2FnZSIsIiRtZFRvYXN0Iiwic2ltcGxlIiwidGV4dENvbnRlbnQiLCJsb2NhdGlvbiIsImhyZWYiLCJyZWplY3QiLCJpbnRlcmNlcHRvckNvbmZpZyIsIiRodHRwUHJvdmlkZXIiLCJpbnRlcmNlcHRvcnMiLCJwdXNoIiwiZmFjdG9yeSIsInBsYXllclNlcnZpY2UiLCJsb2dpbiIsIm5hbWUiLCJnZXRQbGF5ZXJTdGF0cyIsImdldFBsYXllckludmVudG9yeSIsInBsYXllck5hbWUiLCJwbGF5ZXJDb2lucyIsImxvZ291dCIsIkFwcGxpY2F0aW9uQ29udHJvbGxlciIsIiRpbnRlcnZhbCIsInZtIiwibG9naW5Qcm9taXNlIiwiaGFzU2Vzc2lvbiIsImRlY3JlbWVudFNlY29uZHMiLCJ0aW1lTGVmdCIsImludmVudG9yeVByb21pc2UiLCJhc3NpZ25UbyIsInBsYXllclN0YXRzUHJvbWlzZSIsInN1Ym1pdEF1Y3Rpb25DcmVhdGlvbiIsImlkIiwiYXVjdGlvblByb21pc2UiLCJpbml0Iiwic29ja2V0IiwiaW8iLCJjb25uZWN0Iiwib24iLCJlbWl0IiwiRXZlbnRzIiwiQVVDVElPTl9TVEFSVCIsIkFVQ1RJT05fRklOSVNIIiwiYXVjdGlvbkZpbmlzaCIsIkJJRF9QTEFDRUQiLCJBVUNUSU9OX1dJTiIsImF1Y3Rpb25XaW4iLCJJTlZFTlRPUllfVVBEQVRFIiwiQ09JTl9VUERBVEUiLCJjb2luVXBkYXRlIiwiY29pbnMiLCJwbGF5ZXIiLCJvYmplY3QiLCJwcm9wZXJ0eSIsImludGVydmFsIiwiaXRlbU5hbWUiLCJpdGVtUXVhbnRpdHkiLCJpdGVtSWNvbiIsIml0ZW1DbGljayJdLCJtYXBwaW5ncyI6IkFBQUEsOEZBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Q0NOQSxTQUFBQSxHQUNBLFlBRUFBLEdBQUFDLE9BQUEsNkJBQ0EseUJBQ0EsYUFDQSxZQUNBLGFBQ0EsNEJBR0FELFNDWEEsU0FBQUEsR0FDQSxZQUVBQSxHQUFBQyxPQUFBLDBCQUNBLDRCQUdBRCxTQ1BBLFNBQUFBLEdBQ0EsWUFFQUEsR0FBQUMsT0FBQSwrQkFDQSx5QkFDQSxhQUNBLFlBQ0EsNEJBR0FELFNDVkEsU0FBQUEsR0FDQSxZQUVBQSxHQUFBQyxPQUFBLDRCQUNBLHlCQUNBLGFBQ0EsWUFDQSw0QkFHQUQsU0NWQSxTQUFBQSxHQUNBLFlBRUFBLEdBQUFDLE9BQUEscUJBQ0EseUJBQ0EsYUFDQSxZQUVBLHlCQUNBLHlCQUNBLDJCQUNBLDhCQUNBLCtCQUdBRCxTQ2ZBLFNBQUFBLEdBQ0EsWUFPQSxTQUFBRSxHQUFBQyxHQUNBQSxFQUFBQyxzQkFDQUMsT0FBQSxhQUNBQyxPQUFBLFVBRUFILEVBQUFJLGtCQUFBLFNBQ0FKLEVBQUFLLHlCQUFBLFdBWEFSLEVBQUFDLE9BQUEscUJBQ0FRLE9BQUFQLEdBRUFBLEVBQUFRLFNBQUEsdUJBV0FWLFND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ZXItYXVjdGlvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbbnVsbCwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Nyb3Nzb3Zlci5hdWN0aW9uLmF1Y3Rpb24nLCBbXG4gICAgICAgICdwYXNjYWxwcmVjaHQudHJhbnNsYXRlJyxcbiAgICAgICAgJ25nTWF0ZXJpYWwnLFxuICAgICAgICAnbmdNZEljb25zJyxcbiAgICAgICAgJ25nTWVzc2FnZXMnLFxuICAgICAgICAnY3Jvc3NvdmVyLmF1Y3Rpb24uY29yZSdcbiAgICBdKTtcblxufShhbmd1bGFyKSk7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Nyb3Nzb3Zlci5hdWN0aW9uLmNvcmUnLCBbXG4gICAgICAgICdjcm9zc292ZXIuYXVjdGlvbi50cGxzJ1xuICAgIF0pO1xuXG59KGFuZ3VsYXIpKTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY3Jvc3NvdmVyLmF1Y3Rpb24uaW52ZW50b3J5JywgW1xuICAgICAgICAncGFzY2FscHJlY2h0LnRyYW5zbGF0ZScsXG4gICAgICAgICduZ01hdGVyaWFsJyxcbiAgICAgICAgJ25nTWRJY29ucycsXG4gICAgICAgICdjcm9zc292ZXIuYXVjdGlvbi5jb3JlJ1xuICAgIF0pO1xuXG59KGFuZ3VsYXIpKTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY3Jvc3NvdmVyLmF1Y3Rpb24ucGxheWVyJywgW1xuICAgICAgICAncGFzY2FscHJlY2h0LnRyYW5zbGF0ZScsXG4gICAgICAgICduZ01hdGVyaWFsJyxcbiAgICAgICAgJ25nTWRJY29ucycsXG4gICAgICAgICdjcm9zc292ZXIuYXVjdGlvbi5jb3JlJ1xuICAgIF0pO1xuXG59KGFuZ3VsYXIpKTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY3Jvc3NvdmVyLmF1Y3Rpb24nLCBbXG4gICAgICAgICdwYXNjYWxwcmVjaHQudHJhbnNsYXRlJyxcbiAgICAgICAgJ25nTWF0ZXJpYWwnLFxuICAgICAgICAnbmdNZEljb25zJyxcblxuICAgICAgICAnY3Jvc3NvdmVyLmF1Y3Rpb24uY29yZScsXG4gICAgICAgICdjcm9zc292ZXIuYXVjdGlvbi50cGxzJyxcbiAgICAgICAgJ2Nyb3Nzb3Zlci5hdWN0aW9uLnBsYXllcicsXG4gICAgICAgICdjcm9zc292ZXIuYXVjdGlvbi5pbnZlbnRvcnknLFxuICAgICAgICAnY3Jvc3NvdmVyLmF1Y3Rpb24uYXVjdGlvbidcbiAgICBdKTtcblxufShhbmd1bGFyKSk7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Nyb3Nzb3Zlci5hdWN0aW9uJylcbiAgICAgICAgLmNvbmZpZyhpMThuQ29uZmlnKTtcblxuICAgIGkxOG5Db25maWcuJGluamVjdCA9IFsnJHRyYW5zbGF0ZVByb3ZpZGVyJ107XG5cbiAgICBmdW5jdGlvbiBpMThuQ29uZmlnKCR0cmFuc2xhdGVQcm92aWRlcikge1xuICAgICAgICAkdHJhbnNsYXRlUHJvdmlkZXIudXNlU3RhdGljRmlsZXNMb2FkZXIoe1xuICAgICAgICAgICAgcHJlZml4OiAnbGFuZ3VhZ2VzLycsXG4gICAgICAgICAgICBzdWZmaXg6ICcuanNvbidcbiAgICAgICAgfSk7XG4gICAgICAgICR0cmFuc2xhdGVQcm92aWRlci5wcmVmZXJyZWRMYW5ndWFnZSgnZW5fVVMnKTtcbiAgICAgICAgJHRyYW5zbGF0ZVByb3ZpZGVyLnVzZVNhbml0aXplVmFsdWVTdHJhdGVneSgnZXNjYXBlZCcpO1xuICAgIH1cblxufShhbmd1bGFyKSk7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Nyb3Nzb3Zlci5hdWN0aW9uLmF1Y3Rpb24nKVxuICAgICAgICAuc2VydmljZSgnYXVjdGlvblNlcnZpY2UnLCBhdWN0aW9uU2VydmljZSk7XG5cbiAgICBhdWN0aW9uU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsICckbWREaWFsb2cnXTtcblxuICAgIGZ1bmN0aW9uIGF1Y3Rpb25TZXJ2aWNlKCRodHRwLCAkbWREaWFsb2cpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHNlbGYuZ2V0QWN0aXZlQXVjdGlvbiA9IGdldEFjdGl2ZUF1Y3Rpb247XG4gICAgICAgIHNlbGYuY3JlYXRlQXVjdGlvbiA9IGNyZWF0ZUF1Y3Rpb247XG4gICAgICAgIHNlbGYucGxhY2VCaWQgPSBwbGFjZUJpZDtcbiAgICAgICAgc2VsZi5vcGVuRGlhbG9nQ3JlYXRpb24gPSBvcGVuRGlhbG9nQ3JlYXRpb247XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0QWN0aXZlQXVjdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hdWN0aW9uJykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhID09ICdudWxsJyA/IG51bGwgOiByZXN1bHQuZGF0YTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlQXVjdGlvbihpdGVtSWQsIHF1YW50aXR5LCBpbml0aWFsQmlkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2F1Y3Rpb24nLCB7XG4gICAgICAgICAgICAgICAgaXRlbUlkIDogaXRlbUlkLFxuICAgICAgICAgICAgICAgIHF1YW50aXR5IDogcXVhbnRpdHksXG4gICAgICAgICAgICAgICAgaW5pdGlhbEJpZCA6IGluaXRpYWxCaWRcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQuZGF0YTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcGxhY2VCaWQoYXVjdGlvbklkLCB2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hdWN0aW9uL2JpZCcsIHtcbiAgICAgICAgICAgICAgICBhdWN0aW9uSWQgOiBhdWN0aW9uSWQsXG4gICAgICAgICAgICAgICAgdmFsdWUgOiB2YWx1ZVxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvcGVuRGlhbG9nQ3JlYXRpb24oaXRlbSwgY29uZmlybUZuKSB7XG4gICAgICAgICAgICAkbWREaWFsb2cuc2hvdyh7XG4gICAgICAgICAgICAgICAgcGFyZW50IDogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKSksXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiAnYXVjdGlvbi9zZXJ2aWNlL2F1Y3Rpb24uZm9ybS5odG1sJyxcbiAgICAgICAgICAgICAgICBsb2NhbHMgOiB7IGl0ZW0gOiBpdGVtLCBjb25maXJtRm4gOiBjb25maXJtRm4gfSxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyIDogYXVjdGlvbkZvcm1Db250cm9sbGVyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIGF1Y3Rpb25Gb3JtQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJG1kRGlhbG9nJywgJ2l0ZW0nLCAnY29uZmlybUZuJ107XG5cbiAgICBmdW5jdGlvbiBhdWN0aW9uRm9ybUNvbnRyb2xsZXIoJHNjb3BlLCAkbWREaWFsb2csIGl0ZW0sIGNvbmZpcm1Gbikge1xuICAgICAgICAkc2NvcGUuaXRlbSA9IGl0ZW07XG4gICAgICAgICRzY29wZS5jbG9zZURpYWxvZyA9IGNsb3NlRGlhbG9nO1xuICAgICAgICAkc2NvcGUuY29uZmlybSA9IGNvbmZpcm07XG5cbiAgICAgICAgZnVuY3Rpb24gY2xvc2VEaWFsb2coKSB7XG4gICAgICAgICAgICAkbWREaWFsb2cuaGlkZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY29uZmlybSgpIHtcbiAgICAgICAgICAgICRzY29wZS5wcm9taXNlID0gY29uZmlybUZuKGl0ZW0sICRzY29wZS5xdWFudGl0eSwgJHNjb3BlLmluaXRpYWxCaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGNsb3NlRGlhbG9nKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjbG9zZURpYWxvZygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbn0oYW5ndWxhcikpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjcm9zc292ZXIuYXVjdGlvbi5hdWN0aW9uJykuY29tcG9uZW50KCdjb2FBdWN0aW9uV2lkZ2V0Jywge1xuICAgICAgICB0ZW1wbGF0ZVVybCA6ICdhdWN0aW9uL3dpZGdldC9hdWN0aW9uLndpZGdldC5odG1sJyxcbiAgICAgICAgYmluZGluZ3MgOiB7XG4gICAgICAgICAgICBhdWN0aW9uIDogJz0nLFxuICAgICAgICAgICAgcGxheWVySWQgOiAnPScsXG4gICAgICAgICAgICBwbGFjZUJpZCA6ICcmJyxcbiAgICAgICAgICAgIHByb21pc2UgOiAnPScsXG4gICAgICAgICAgICByZXRyeSA6ICcmJ1xuICAgICAgICB9LFxuICAgICAgICBjb250cm9sbGVyIDogYXVjdGlvbldpZGdldENvbnRyb2xsZXJcbiAgICB9KTtcblxuICAgIGF1Y3Rpb25XaWRnZXRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZSddO1xuXG4gICAgZnVuY3Rpb24gYXVjdGlvbldpZGdldENvbnRyb2xsZXIoJHNjb3BlKSB7XG4gICAgICAgIHZhciAkY3RybCA9IHRoaXM7XG5cbiAgICAgICAgJHNjb3BlLiR3YXRjaEdyb3VwKFsnJGN0cmwuYXVjdGlvbi5pbml0aWFsQmlkJywgJyRjdHJsLmF1Y3Rpb24ud2lubmluZ0JpZCddLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoJGN0cmwuYXVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoJGN0cmwuYXVjdGlvbi53aW5uaW5nQmlkKSkge1xuICAgICAgICAgICAgICAgICAgICAkY3RybC5hdWN0aW9uLm1pbmltdW1CaWQgPSAkY3RybC5hdWN0aW9uLndpbm5pbmdCaWQgKyAxO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICRjdHJsLmF1Y3Rpb24ud2lubmluZ0JpZCA9ICRjdHJsLmF1Y3Rpb24uaW5pdGlhbEJpZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRjdHJsLmNvbmZpcm0gPSBjb25maXJtO1xuXG4gICAgICAgIGZ1bmN0aW9uIGNvbmZpcm0oYmlkVmFsdWUpIHtcbiAgICAgICAgICAgICRjdHJsLmJpZFByb21pc2UgPSAkY3RybC5wbGFjZUJpZCh7XG4gICAgICAgICAgICAgICAgYmlkVmFsdWUgOiBiaWRWYWx1ZSxcbiAgICAgICAgICAgICAgICBhdWN0aW9uIDogJGN0cmwuYXVjdGlvblxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJGN0cmwuYmlkVmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxufShhbmd1bGFyKSk7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Nyb3Nzb3Zlci5hdWN0aW9uLmNvcmUnKS5jb21wb25lbnQoJ2NvYVByb2dyZXNzJywge1xuICAgICAgICB0ZW1wbGF0ZVVybCA6ICdjb3JlL3Byb2dyZXNzL3Byb2dyZXNzLmh0bWwnLFxuICAgICAgICBiaW5kaW5ncyA6IHtcbiAgICAgICAgICAgIHByb21pc2UgOiAnPScsXG4gICAgICAgICAgICByZXRyeSA6ICcmJ1xuICAgICAgICB9XG4gICAgfSk7XG5cbn0oYW5ndWxhcikpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjcm9zc292ZXIuYXVjdGlvbi5pbnZlbnRvcnknKS5jb21wb25lbnQoJ2NvYUludmVudG9yeVdpZGdldCcsIHtcbiAgICAgICAgdHJhbnNjbHVkZSA6IHRydWUsXG4gICAgICAgIHRlbXBsYXRlVXJsIDogJ2ludmVudG9yeS93aWRnZXQvaW52ZW50b3J5LndpZGdldC5odG1sJyxcbiAgICAgICAgYmluZGluZ3MgOiB7XG4gICAgICAgICAgICBwcm9taXNlIDogJz0nLFxuICAgICAgICAgICAgcmV0cnkgOiAnJidcbiAgICAgICAgfVxuICAgIH0pO1xuXG59KGFuZ3VsYXIpKTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY3Jvc3NvdmVyLmF1Y3Rpb24ucGxheWVyJylcbiAgICAgICAgLmZhY3RvcnkoJ0h0dHBJbnRlcmNlcHRvcicsIEh0dHBJbnRlcmNlcHRvcilcbiAgICAgICAgLmNvbmZpZyhpbnRlcmNlcHRvckNvbmZpZyk7XG5cbiAgICBIdHRwSW50ZXJjZXB0b3IuJGluamVjdCA9IFsnJHEnLCAnJHRyYW5zbGF0ZScsICckaW5qZWN0b3InLCAncGxheWVyU2Vzc2lvblNlcnZpY2UnXTtcbiAgICBmdW5jdGlvbiBIdHRwSW50ZXJjZXB0b3IoJHEsICR0cmFuc2xhdGUsICRpbmplY3RvciwgcGxheWVyU2Vzc2lvblNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlcXVlc3QgOiBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLmhlYWRlcnNbJ1Rva2VuJ10gPSBwbGF5ZXJTZXNzaW9uU2VydmljZS50b2tlbjtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlc3BvbnNlRXJyb3IgOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA1MDApIHtcbiAgICAgICAgICAgICAgICAgICAgJHRyYW5zbGF0ZShyZXNwb25zZS5kYXRhLm1lc3NhZ2UpLnRoZW4oZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkbWRUb2FzdCA9ICRpbmplY3Rvci5nZXQoJyRtZFRvYXN0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaG93KCRtZFRvYXN0LnNpbXBsZSgpLnRleHRDb250ZW50KG1lc3NhZ2UpKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGludGVyY2VwdG9yQ29uZmlnLiRpbmplY3QgPSBbJyRodHRwUHJvdmlkZXInXTtcbiAgICBmdW5jdGlvbiBpbnRlcmNlcHRvckNvbmZpZygkaHR0cFByb3ZpZGVyKSB7XG4gICAgICAgICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ0h0dHBJbnRlcmNlcHRvcicpO1xuICAgIH1cblxufShhbmd1bGFyKSk7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Nyb3Nzb3Zlci5hdWN0aW9uLnBsYXllcicpXG4gICAgICAgIC5zZXJ2aWNlKCdwbGF5ZXJTZXJ2aWNlJywgcGxheWVyU2VydmljZSk7XG5cbiAgICBwbGF5ZXJTZXJ2aWNlLiRpbmplY3QgPSBbJ3BsYXllclNlc3Npb25TZXJ2aWNlJywgJyRodHRwJ107XG4gICAgZnVuY3Rpb24gcGxheWVyU2VydmljZShwbGF5ZXJTZXNzaW9uU2VydmljZSwgJGh0dHApIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBcbiAgICAgICAgc2VsZi5sb2dpbiA9IGxvZ2luO1xuICAgICAgICBzZWxmLmdldFBsYXllclN0YXRzID0gZ2V0UGxheWVyU3RhdHM7XG4gICAgICAgIHNlbGYuZ2V0UGxheWVySW52ZW50b3J5ID0gZ2V0UGxheWVySW52ZW50b3J5O1xuXG4gICAgICAgIGZ1bmN0aW9uIGxvZ2luKG5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvcGxheWVyL2xvZ2luJywgeyBuYW1lIDogbmFtZSB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXJTZXNzaW9uU2VydmljZS50b2tlbiA9IHJlc3VsdC5kYXRhLnRva2VuO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRQbGF5ZXJTdGF0cygpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9wbGF5ZXIvc3RhdHMnKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LmRhdGE7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFBsYXllckludmVudG9yeSgpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9wbGF5ZXIvaW52ZW50b3J5JykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbn0oYW5ndWxhcikpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjcm9zc292ZXIuYXVjdGlvbi5wbGF5ZXInKVxuICAgICAgICAuc2VydmljZSgncGxheWVyU2Vzc2lvblNlcnZpY2UnLCBwbGF5ZXJTZXNzaW9uU2VydmljZSk7XG5cbiAgICBwbGF5ZXJTZXNzaW9uU2VydmljZS4kaW5qZWN0ID0gW107XG4gICAgZnVuY3Rpb24gcGxheWVyU2Vzc2lvblNlcnZpY2UoKSB7XG4gICAgICAgIHRoaXMudG9rZW4gPSBudWxsO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbn0oYW5ndWxhcikpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjcm9zc292ZXIuYXVjdGlvbi5wbGF5ZXInKS5jb21wb25lbnQoJ2NvYVBsYXllcldpZGdldCcsIHtcbiAgICAgICAgdGVtcGxhdGVVcmwgOiAncGxheWVyL3dpZGdldC9wbGF5ZXIud2lkZ2V0Lmh0bWwnLFxuICAgICAgICBiaW5kaW5ncyA6IHtcbiAgICAgICAgICAgIHBsYXllck5hbWUgOiAnPScsXG4gICAgICAgICAgICBwbGF5ZXJDb2lucyA6ICc9JyxcbiAgICAgICAgICAgIGxvZ291dCA6ICcmJyxcbiAgICAgICAgICAgIHByb21pc2UgOiAnPScsXG4gICAgICAgICAgICByZXRyeSA6ICcmJ1xuICAgICAgICB9XG4gICAgfSk7XG5cbn0oYW5ndWxhcikpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjcm9zc292ZXIuYXVjdGlvbicpXG4gICAgICAgIC5jb250cm9sbGVyKCdBcHBsaWNhdGlvbkNvbnRyb2xsZXInLCBBcHBsaWNhdGlvbkNvbnRyb2xsZXIpO1xuXG4gICAgQXBwbGljYXRpb25Db250cm9sbGVyLiRpbmplY3QgPSBbJyRpbnRlcnZhbCcsICdwbGF5ZXJTZXJ2aWNlJywgJ2F1Y3Rpb25TZXJ2aWNlJywgJ3BsYXllclNlc3Npb25TZXJ2aWNlJywgJyR0cmFuc2xhdGUnLCAnJG1kVG9hc3QnXTtcbiAgICBmdW5jdGlvbiBBcHBsaWNhdGlvbkNvbnRyb2xsZXIoJGludGVydmFsLCBwbGF5ZXJTZXJ2aWNlLCBhdWN0aW9uU2VydmljZSwgcGxheWVyU2Vzc2lvblNlcnZpY2UsICR0cmFuc2xhdGUsICRtZFRvYXN0KSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgdm0uaW50ZXJ2YWwgPSAkaW50ZXJ2YWwoZGVjcmVtZW50U2Vjb25kcywgMTAwMCk7XG5cbiAgICAgICAgdm0uaGFzU2Vzc2lvbiA9IGhhc1Nlc3Npb247XG4gICAgICAgIHZtLmxvZ2luID0gbG9naW47XG4gICAgICAgIHZtLmxvZ291dCA9IGxvZ291dDtcbiAgICAgICAgdm0uY3JlYXRlQXVjdGlvbiA9IGNyZWF0ZUF1Y3Rpb247XG4gICAgICAgIHZtLmdldFBsYXllckludmVudG9yeSA9IGdldFBsYXllckludmVudG9yeTtcbiAgICAgICAgdm0uZ2V0UGxheWVyU3RhdHMgPSBnZXRQbGF5ZXJTdGF0cztcbiAgICAgICAgdm0uZ2V0QWN0aXZlQXVjdGlvbiA9IGdldEFjdGl2ZUF1Y3Rpb247XG4gICAgICAgIHZtLnBsYWNlQmlkID0gcGxhY2VCaWQ7XG4gICAgICAgIHZtLmluaXQgPSBpbml0O1xuXG4gICAgICAgIGZ1bmN0aW9uIGxvZ2luKG5hbWUpIHtcbiAgICAgICAgICAgIHZtLmxvZ2luUHJvbWlzZSA9IHBsYXllclNlcnZpY2UubG9naW4obmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBoYXNTZXNzaW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHBsYXllclNlc3Npb25TZXJ2aWNlLnRva2VuICE9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkZWNyZW1lbnRTZWNvbmRzKCkge1xuICAgICAgICAgICAgaWYgKHZtLmF1Y3Rpb24gJiYgdm0uYXVjdGlvbi50aW1lTGVmdCA+IDApIHtcbiAgICAgICAgICAgICAgICB2bS5hdWN0aW9uLnRpbWVMZWZ0LS07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRQbGF5ZXJJbnZlbnRvcnkoKSB7XG4gICAgICAgICAgICB2bS5pbnZlbnRvcnlQcm9taXNlID0gcGxheWVyU2VydmljZS5nZXRQbGF5ZXJJbnZlbnRvcnkoKVxuICAgICAgICAgICAgICAgIC50aGVuKGFzc2lnblRvKHZtLCAnaW52ZW50b3J5JykpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0UGxheWVyU3RhdHMoKSB7XG4gICAgICAgICAgICB2bS5wbGF5ZXJTdGF0c1Byb21pc2UgPSBwbGF5ZXJTZXJ2aWNlLmdldFBsYXllclN0YXRzKClcbiAgICAgICAgICAgICAgICAudGhlbihhc3NpZ25Ubyh2bSwgJ3BsYXllcicpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUF1Y3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgYXVjdGlvblNlcnZpY2Uub3BlbkRpYWxvZ0NyZWF0aW9uKGl0ZW0sIHN1Ym1pdEF1Y3Rpb25DcmVhdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzdWJtaXRBdWN0aW9uQ3JlYXRpb24oaXRlbSwgcXVhbnRpdHksIGluaXRpYWxCaWQpIHtcbiAgICAgICAgICAgIHJldHVybiBhdWN0aW9uU2VydmljZS5jcmVhdGVBdWN0aW9uKGl0ZW0uaWQsIHF1YW50aXR5LCBpbml0aWFsQmlkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEFjdGl2ZUF1Y3Rpb24oKSB7XG4gICAgICAgICAgICB2bS5hdWN0aW9uUHJvbWlzZSA9IGF1Y3Rpb25TZXJ2aWNlLmdldEFjdGl2ZUF1Y3Rpb24oKS50aGVuKGFzc2lnblRvKHZtLCAnYXVjdGlvbicpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGxvZ291dCgpIHtcbiAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IEV2ZW50cyA9IHtcbiAgICAgICAgICAgIEFVQ1RJT05fU1RBUlQgOiAnYXVjdGlvbl9zdGFydCcsXG4gICAgICAgICAgICBBVUNUSU9OX0ZJTklTSCA6ICdhdWN0aW9uX2ZpbmlzaCcsXG4gICAgICAgICAgICBCSURfUExBQ0VEIDogJ2JpZF9wbGFjZWQnLFxuICAgICAgICAgICAgQVVDVElPTl9XSU4gOiAnYXVjdGlvbl93aW4nLFxuICAgICAgICAgICAgSU5WRU5UT1JZX1VQREFURSA6ICdpbnZlbnRvcnlfdXBkYXRlJyxcbiAgICAgICAgICAgIENPSU5fVVBEQVRFIDogJ2NvaW5fdXBkYXRlJ1xuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgICAgICB2YXIgc29ja2V0ID0gaW8uY29ubmVjdCgnLycsIHt9KTtcbiAgICAgICAgICAgIHNvY2tldC5vbignZGlzY29ubmVjdCcsIGxvZ291dCk7XG4gICAgICAgICAgICBzb2NrZXQub24oJ2Nvbm5lY3QnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc29ja2V0LmVtaXQoJ2F1dGhlbnRpY2F0ZScsIHBsYXllclNlc3Npb25TZXJ2aWNlLnRva2VuKTtcbiAgICAgICAgICAgICAgICBzb2NrZXQub24oRXZlbnRzLkFVQ1RJT05fU1RBUlQsIGFzc2lnblRvKHZtLCAnYXVjdGlvbicpKTtcbiAgICAgICAgICAgICAgICBzb2NrZXQub24oRXZlbnRzLkFVQ1RJT05fRklOSVNILCBhdWN0aW9uRmluaXNoKTtcbiAgICAgICAgICAgICAgICBzb2NrZXQub24oRXZlbnRzLkJJRF9QTEFDRUQsIGFzc2lnblRvKHZtLCAnYXVjdGlvbicpKTtcbiAgICAgICAgICAgICAgICBzb2NrZXQub24oRXZlbnRzLkFVQ1RJT05fV0lOLCBhdWN0aW9uV2luKTtcbiAgICAgICAgICAgICAgICBzb2NrZXQub24oRXZlbnRzLklOVkVOVE9SWV9VUERBVEUsIGFzc2lnblRvKHZtLCAnaW52ZW50b3J5JykpO1xuICAgICAgICAgICAgICAgIHNvY2tldC5vbihFdmVudHMuQ09JTl9VUERBVEUsIGNvaW5VcGRhdGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhdWN0aW9uV2luKCkge1xuICAgICAgICAgICAgJHRyYW5zbGF0ZSgnQ1JPU1NPVkVSX0FVQ1RJT05fV09OJykudGhlbihmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICRtZFRvYXN0LnNob3coJG1kVG9hc3Quc2ltcGxlKCkudGV4dENvbnRlbnQobWVzc2FnZSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBwbGFjZUJpZChiaWRWYWx1ZSwgYXVjdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIGF1Y3Rpb25TZXJ2aWNlLnBsYWNlQmlkKGF1Y3Rpb24uaWQsIGJpZFZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGF1Y3Rpb25GaW5pc2goKSB7XG4gICAgICAgICAgICB2bS5hdWN0aW9uID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNvaW5VcGRhdGUoY29pbnMpIHtcbiAgICAgICAgICAgIHZtLnBsYXllci5jb2lucyA9IGNvaW5zO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYXNzaWduVG8ob2JqZWN0LCBwcm9wZXJ0eSkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBvYmplY3RbcHJvcGVydHldID0gcmVzdWx0O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxufShhbmd1bGFyKSk7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Nyb3Nzb3Zlci5hdWN0aW9uLmludmVudG9yeScpLmNvbXBvbmVudCgnY29hSW52ZW50b3J5SXRlbScsIHtcbiAgICAgICAgdGVtcGxhdGVVcmwgOiAnaW52ZW50b3J5L3dpZGdldC9pdGVtL2ludmVudG9yeS5pdGVtLmh0bWwnLFxuICAgICAgICBiaW5kaW5ncyA6IHtcbiAgICAgICAgICAgIGl0ZW1OYW1lIDogJz0nLFxuICAgICAgICAgICAgaXRlbVF1YW50aXR5IDogJz0nLFxuICAgICAgICAgICAgaXRlbUljb24gOiAnPScsXG4gICAgICAgICAgICBpdGVtQ2xpY2sgOiAnJidcbiAgICAgICAgfVxuICAgIH0pO1xuXG59KGFuZ3VsYXIpKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
